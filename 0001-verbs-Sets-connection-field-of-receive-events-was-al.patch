From 95caa4db84dfdfa4fe239e60d6e1de530971c268 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Facundo=20Dom=C3=ADnguez?= <facundo.dominguez@parsci.com>
Date: Tue, 10 Jan 2012 11:56:52 -0700
Subject: [PATCH] verbs: Sets connection field of receive events (was always NULL).

---
 src/plugins/core/verbs/core_verbs_api.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/src/plugins/core/verbs/core_verbs_api.c b/src/plugins/core/verbs/core_verbs_api.c
index 848e01c..8bee298 100644
--- a/src/plugins/core/verbs/core_verbs_api.c
+++ b/src/plugins/core/verbs/core_verbs_api.c
@@ -1911,6 +1911,7 @@ verbs_handle_msg(cci__ep_t *ep, struct ibv_wc wc)
 	}
 
 	rx = (verbs_rx_t *) (uintptr_t) wc.wr_id;
+        conn = vconn->conn;
 	rx->evt.conn = conn;
 	rx->evt.event.type = CCI_EVENT_RECV;
 	rx->evt.event.recv.connection = &conn->connection;
-- 
1.7.1

